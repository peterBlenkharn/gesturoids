/* css/style.css */

/* --- 1. THE MONOCHROME PALETTE & FONT SIMULATION --- */
:root {
  --bg-color: #050505;
  --primary: #00ff88; /* Core Mint Green */
  --secondary: #00ccff; /* Used lightly for accents, but main theme is primary */
  --danger: #ff3333; /* Used internally for red states, but we'll use color cycling */
  --ui-bg: rgba(0, 20, 0, 0.8);
}

body {
  margin: 0;
  overflow: hidden;
  background: var(--bg-color);
  /* Simulate a blocky, retro font */
  font-family: 'Courier New', Courier, monospace; 
  color: var(--primary);
  user-select: none;
  touch-action: none; /* Prevents mobile scrolling/zooming */
}

/* --- 2. FULL-SCREEN GAME CONTAINER --- */
.game-container {
  position: relative;
  width: 100vw;
  height: 100vh;
  /* Subtle dark scanline background effect (vertical lines) */
  background: linear-gradient(to right, rgba(18, 16, 16, 0) 99%, rgba(0, 0, 0, 0.1) 100%);
  background-size: 2px 100%;
}

/* --- 3. CANVAS SETUP --- */
canvas#gameCanvas { 
  display: block; 
  /* Mirror the canvas so the user's right hand maps to the game's right side */
  transform: scaleX(-1); 
}

#ui-layer { 
  position: absolute; 
  top: 0; 
  left: 0; 
  width: 100%; 
  height: 100%; 
  pointer-events: none; /* Allows clicks/taps to pass through to elements that need them */
}

.hidden { 
  display: none !important; 
}

/* --- 4. WEBCAM & DEBUG PIP STYLES --- */
#webcam { 
  position: absolute; 
  opacity: 0; 
  width: 1px; 
  height: 1px; 
}

#camera-pip {
  position: absolute;
  top: 50px; 
  left: 10px;
  width: 160px; /* Small default size */
  height: 120px;
  border: 2px solid var(--primary);
  background: #000;
  z-index: 190; /* Should be visible over the game canvas */
  box-shadow: 0 0 15px var(--primary);
  overflow: hidden;
  pointer-events: none;
}

#debugCanvas {
  width: 100%; 
  height: 100%;
  transform: scaleX(-1);
  /* CRITICAL: Pixelation filters for the retro look */
  image-rendering: -moz-crisp-edges;
  image-rendering: -webkit-crisp-edges;
  image-rendering: pixelated;
  image-rendering: crisp-edges;
  /* Filter to enforce monochrome and contrast */
  filter: grayscale(100%) contrast(150%) brightness(0.9);
}
/* --- 5. UI UTILS & LAYOUT --- */
.overlay, #calibration-overlay { 
  position: absolute; 
  top: 0; 
  left: 0; 
  width: 100%; 
  height: 100%; 
  background: rgba(0,0,0,0.95); 
  display: flex; 
  flex-direction: column; 
  align-items: center; 
  justify-content: center; 
  z-index: 50; 
  pointer-events: auto; /* Allows interaction */
}

button { 
  background: #000; 
  color: var(--primary); 
  border: 2px solid var(--primary); 
  padding: 15px 30px; 
  font-size: 1rem; 
  cursor: pointer; 
  font-family: 'Courier New', monospace; 
  text-transform: uppercase; 
  margin-top: 20px; 
  transition: 0.1s; 
}
button:disabled { 
  border-color: #333; 
  color: #333; 
  cursor: wait; 
}
button:hover:not(:disabled) { 
  background: var(--primary); 
  color: #000; 
  box-shadow: 0 0 20px var(--primary); 
}


/* --- 6. GLITCH HEADER EFFECT (Optional, but adds juice) --- */
h1.glitch-text {
  font-size: 3rem; 
  letter-spacing: 5px;
  color: #fff;
  margin: 0 0 20px 0;
  position: relative;
  animation: glitch 3s infinite;
  text-align: center;
}

h1.glitch-text::before, h1.glitch-text::after {
  content: "GESTUROIDS";
  position: absolute;
  top: 0; left: 0; width: 100%; height: 100%;
}
/* Use different colors for the glitch layers for maximum effect */
h1.glitch-text::before { color: #ff00ff; z-index: -1; animation: glitch-anim-1 0.4s infinite linear alternate-reverse; }
h1.glitch-text::after { color: #00ffff; z-index: -2; animation: glitch-anim-2 0.4s infinite linear alternate-reverse; }

@keyframes glitch { /* Subtle screen shake */
  0% { transform: skew(0deg); opacity: 1; }
  2% { transform: skew(10deg); opacity: 0.8; }
  4% { transform: skew(-10deg); opacity: 1; }
  6% { transform: skew(0deg); opacity: 1; }
  100% { transform: skew(0deg); }
}
@keyframes glitch-anim-1 { /* Color shifting */
  0% { clip-path: inset(20% 0 80% 0); transform: translate(-2px, 0); }
  100% { clip-path: inset(30% 0 30% 0); transform: translate(2px, 0); }
}
@keyframes glitch-anim-2 {
  0% { clip-path: inset(10% 0 60% 0); transform: translate(2px, 0); }
  100% { clip-path: inset(5% 0 80% 0); transform: translate(-2px, 0); }
}


/* --- 7. HUD & Calibration --- */
.hud-top { 
  display: flex; 
  justify-content: space-between; 
  padding: 10px 20px 0 20px; 
  font-size: 1rem; 
  text-shadow: 0 0 5px var(--primary);
  position: absolute; /* Place over the canvas */
  width: 100%;
  box-sizing: border-box;
  pointer-events: none;
  z-index: 10;
}
.hud-group { 
  display: flex; 
  flex-direction: column; 
  align-items: center; 
}
.label { 
  font-size: 0.7rem; 
  color: #888; 
  margin-bottom: 2px; 
}

/* Calibration Status Elements */
.status-container { 
  display: flex; 
  align-items: center; 
  justify-content: center; 
  gap: 20px; 
  margin-top: 20px; 
  width: 90%; 
  max-width: 600px;
}
.hand-status { 
  width: 120px; 
  padding: 10px; 
  border: 2px solid #333; 
  background: rgba(0,0,0,0.5); 
  text-align: center; 
  transition: 0.3s; 
}
.hand-status.ok { 
  border-color: var(--primary); 
  background: rgba(0, 255, 136, 0.15); 
  box-shadow: 0 0 20px var(--primary); 
}
.blink { 
  animation: blinker 0.2s infinite; 
} 
@keyframes blinker { 
  50% { opacity: 0; } 
}
.center-status { 
  width: 100%; 
  max-width: 300px; 
  text-align: center; 
}
.progress-bar { 
  width: 100%; 
  height: 15px; 
  border: 2px solid #555; 
  margin-bottom: 10px; 
  overflow: hidden; 
  background: #111; 
}
#calib-progress { 
  width: 0%; 
  height: 100%; 
  background: var(--primary); 
  transition: width 0.1s; 
}
